"use strict";angular.module("trelloApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","signature","trello-api-client","satellizer"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl",controllerAs:"main"}).when("/card/:cardID",{templateUrl:"views/card.html",controller:"CardCtrl",controllerAs:"card"}).when("/list",{templateUrl:"views/list.html",controller:"ListCtrl",controllerAs:"list"}).when("/newCard",{templateUrl:"views/newcard.html",controller:"NewcardCtrl",controllerAs:"newCard"}).when("/lsKeys",{templateUrl:"views/lskeys.html",controller:"LskeysCtrl",controllerAs:"lsKeys"}).when("/driverCard/:cardID",{templateUrl:"views/drivercard.html",controller:"DrivercardCtrl",controllerAs:"driverCard"}).when("/accountants/:cardID",{templateUrl:"views/accountants.html",controller:"AccountantsCtrl",controllerAs:"accountants"}).when("/listAccountant",{templateUrl:"views/listaccountant.html",controller:"ListaccountantCtrl",controllerAs:"listAccountant"}).when("/agreement",{templateUrl:"views/agreement.html",controller:"AgreementCtrl",controllerAs:"agreement"}).otherwise({redirectTo:"/list"})}]).config(["TrelloClientProvider",function(a){a.init({key:localStorage.getItem("trello_key"),appName:"Taeki.is",tokenExpiration:"never",scope:["read","write","account"]})}]).config(["$sceDelegateProvider",function(a){a.resourceUrlWhitelist(["self","https://trello-attachments.s3.amazonaws.com/**","https://angularjs.org/**"])}]),angular.module("trelloApp").controller("MainCtrl",["$scope","TrelloClient","TrelloClientConfig",function(a,b,c){a.popupOptions={type:"popup"},a.authenticate=b.authenticate}]),angular.module("trelloApp").controller("CardCtrl",["$scope","$routeParams","TrelloClient","TrelloClientConfig","$filter","$location",function(a,b,c,d,e,f){a.cardData="",a.chosenMachine="velja tæki",a.dateToday=new Date(Date.now()),a.ath="";var g=b.cardID;!function(){c.get("/cards/"+g).then(function(b){console.log("resolved promise ",b.data),a.cardData=b.data,a.descObj=JSON.parse(a.cardData.desc),console.log("parsed desc",a.descObj),a.ath=a.descObj.ath,a.taekisnumer=a.descObj.taekisnumer,a.leigutiminDagPDF=e("date")(a.cardData.due,"yyyy-MM-dd"),a.leigutiminKlPDF=e("date")(a.cardData.due,"HH:mm")}),console.log("name data ",c.get("/cards/"+g))}(),a.create=function(){var b={info:{title:"Leigusamningur",author:"Tæki.is",subject:a.descObj.kennitala,keywords:a.descObj.leigutaki},pageMargins:[50,50,10,50],footer:{text:"Norðurhellu 5.  221 Hafnarfjörður.  Vsk. 61999.  Kt. 650399-2859. Sími 5653344.  taeki@taeki.is ",bold:!0,alignment:"center"},content:["\n",{columns:[{width:"17%",text:"Leigutaki:",bold:!0},{width:"50%",text:a.descObj.leigutaki||""},{width:"14%",text:"Kt.:",bold:!0},{width:"19%",text:a.descObj.kennitala||""}]},"\n",{columns:[{width:"17%",text:"Heimili:",bold:!0},{width:"50%",text:a.descObj.heimili||""},{width:"14%",text:"Umb.:",bold:!0},{width:"19%",text:a.descObj.umb||""}]},"\n",{columns:[{width:"17%",text:"Notkunarst.:",bold:!0},{width:"50%",text:a.descObj.notkunarst||""},{width:"14%",text:"Sími:",bold:!0},{width:"19%",text:a.descObj.simi||""}]},"\n",{columns:[{width:"17%",text:"Tækisnúmer:",bold:!0},{width:"50%",text:a.taekisnumer||""},{width:"14%",text:"Tengil.:",bold:!0},{width:"19%",text:a.descObj.tengil||""}]},"\n",{columns:[{width:"*",text:"Verknúmer:",bold:!0},{width:"*",text:a.descObj.verknumer||""},{width:"*",text:"Beiðnaúmer:",bold:!0},{width:"*",text:a.descObj.bnumer||""},{width:"*",text:"Sími 2:",bold:!0},{width:"*",text:a.descObj.simi2||""}]},"\n",{columns:[{width:"17%",text:"Tækislýsing:",bold:!0},{width:"50%",text:a.descObj.chosenMachine||""},{width:"14%",text:"Netf.:",bold:!0},{width:"19%",text:a.descObj.netf||""}]},"\n",{columns:[{width:"17%",text:"Magn:",bold:!0},{width:"50%",text:a.descObj.magn||""},{width:"14%",text:"Ein. verð:",bold:!0},{width:"19%",text:a.descObj.einverd||""}]},"\n",{columns:[{width:"17%",text:"ATH.:",bold:!0},{width:"*",text:a.ath||""}]},"\n",{columns:[{width:"17%",text:"Flutningur:",bold:!0},{width:"50%",text:a.descObj.flutningur||""},{width:"14%",text:"Eldsneyti:",bold:!0},{width:"19%",text:""}]},"\n",{columns:[{width:"5%",text:"Stór",bold:!0},{width:"5%",text:a.descObj.stor?"X":""},{width:"5%",text:"Lítill",bold:!0},{width:"55%",text:a.descObj.litill?"X":""},{width:"*",text:"  Olía:",bold:!0},{width:"*",text:a.descObj.olia||""}]},"\n",{columns:[{width:"17%",text:"Fylgihlutir:",bold:!0},{width:"50%",text:a.descObj.filgihlutir||""},{width:"14%",text:"Bensín:",bold:!0},{width:"19%",text:a.descObj.bensin||""}]},"\n",{columns:[{width:"17%",text:"Þrif á tæki:",bold:!0},{width:"50%",text:a.descObj.triv||""},{width:"14%",text:"Gas:",bold:!0},{width:"19%",text:a.descObj.gas||""}]},"\n",{style:"tableExample",table:{headerRows:1,body:[[{text:"Leigutími hefst",style:"tableHeader"},{text:"",style:"tableHeader"},{text:"",style:"tableHeader"},{text:"Leigutíma lýkur",style:"tableHeader"}],["Dag.: "+a.leigutiminDagPDF,"Dag.:________________","Dag.:________________","Dag.:________________"],["Kl.:  "+a.leigutiminKlPDF,"Kl.:    ________________","Kl.:    ________________","Kl.:    ________________"],["Dag.:________________","Dag.:________________","Dag.:________________","Dag.:________________"],["Kl.:    ________________","Kl.:    ________________","Kl.:    ________________","Kl.:    ________________"]]},layout:"noBorders"},{text:"LEIGUSKILMÁLAR",style:"header",fontSize:10,bold:!0,alignment:"center",margin:[0,5,0,5]},{fontSize:6,text:[" 1. Ofangreint tæki ásamt fylgihlutum hefur leigusali afhent leigutaka í fullkomnu lagi, sem leigutaki hefur kynnt sér.\n ","    Leigutaki hefur einnig kynnt sér notkun og meðferð tækisins.\n","2. Leigutaki skal sjá um allan rekstur tækisins á meðan hann hefur það á leigu, svo sem smurningu, smurolíu, eldsneyti, þrif o.fl. \n","3. Leigutaki er ábyrgur fyrir tjóni sem kann að verða á tækinu og fylgihlutum þess vegna ógætilegrar og/eða rangrar notkunar.\n","4. Leigutaki ber fulla ábyrgð ef tæki tapast eða því er stolið úr vörslu hans. Ber leigutaka að greiða að fullu andvirði tækisins\n","    auk leigu til þess tíma að uppgjör hefur farið fram.\n","5. Leigusali er á engan hátt ábyrgur vegna slysa eða skemmda er kynnu að orsakast af notkun, meðferð eða flutningi á tækjum \n","er hann leigir út. Sama gildir um vinnustöðvun sem orsakast vegna bilunar á útleigðum tækjum.\n","6. Leigugjald reiknast frá þeim tíma að tækið er afhent þar til því er skilað til leigusala. Greiða ber ávallt lágmarksleigu.\n","7. Ef um langtímaleigu er að ræða, getur leigusali krafist leigu mánaðarlega samkvæmt reikningi. Ef reikningur er ekki greiddur \n","  20 dögum eftir úttektarmánuð reiknast lögleyfðir dráttarvextir.\n","8. Leiga getur breyst samkvæmt gjaldskrá á útleigutímabilinu. Leigusali áskilur sér rétt til að reikna leigu samkvæmt nýrri gjaldskrá\n","er hún hefur tekið gildi.\n"," 9. Leigutaka er óheimilit að lána eða framleigja þau tæki sem hann hefur á leigu nema með skriflegu samþykki leigusala\n","10. Leigutaki greiðir allan kostnað af flutningi tækisins.\n"," 11. Leigusali hefur rétt til hvenær sem honum þóknast að skoða ástand tækisins.\n","12. Ef leigutaki stendur ekki skil á leigugreiðslum eða brýtur í bága við leigusamning þennan, getur leigusali sótt hið leigða til  \n ","leigutaka, en er það ekki skylt. Leigusali getur fengið til liðs við sig viðkomandi fógeta eða lögreglu.\n","Leigutaki ber allan kostnað af þessum aðgerðum.\n","13.  Leigutaki hefur kynnt sér leiguskilmálana og samþykkir þá með undirskrift sinni.\n\n\n"]},{columns:[{text:"F.H. ligutaka:"},{image:a.signature.dataUrl,fit:[100,100]},{text:"F.H.Tæki ehf:"},{text:""}]}]},c=pdfMake.createPdf(b);c.getBlob(function(a){function b(){var b=new FormData;b.append("token",c),b.append("key",f),b.append("file",a,"Leigusamningur"+e("date")(Date.now(),"yyyy-MM-dd-HH-mm")+".pdf");var d=new XMLHttpRequest;d.open("POST","https://api.trello.com/1/cards/"+g+"/attachments"),d.send(b)}var c=localStorage.getItem("trello_token"),f=d.key;b()}),alert(" Leigusamningur fyrir"+a.descObj.leigutaki+" hefur verið sent i Trello ",f.path("list/"))},a.backToList=function(){f.path("list/")}}]),angular.module("trelloApp").controller("ListCtrl",["$scope","TrelloClient","TrelloClientConfig","$location","$http",function(a,b,c,d,e){function f(){b.get("/lists/"+g).then(function(b){console.log(b),a.listName=b.data.name})}var g=localStorage.getItem("trello_DriverListId"),h=localStorage.getItem("trello_key"),i=localStorage.getItem("trello_token");f(),a.getList=function(){var b={method:"GET",url:"https://api.trello.com/1/lists/"+g+"/cards",params:{token:i,key:h}};e(b).then(function(b){console.log("GET all  cards  ",b),a.cards=b.data.filter(function(a){try{JSON.parse(a.desc)}catch(b){return!1}return!0})},function(a){alert("Get ekki lesið trello ")})},a.getCard=function(a){d.path("card/"+a+"/")},a.getList()}]),angular.module("trelloApp").controller("NewcardCtrl",["$scope","$http","TrelloClient","TrelloClientConfig",function(a,b,c,d){a.leigutaki="",a.kennitala="",a.heimili="",a.umb="",a.notkunarst="",a.simi="",a.taekisnumer="",a.tengil="",a.verknumer="",a.bnumer="",a.simi2="",a.chosenMachine="",a.netf="",a.ath="",a.einverd="",a.magn="",a.filgihlutir="",a.triv="",a.olia="",a.bensin="",a.gas="",a.flutningur="",a.stor=!1,a.litill=!1,a.leigutiminLykur="",a.leigutimin2="",a.leigutiminLykur2="";var e=localStorage.getItem("trello_MachinesListId"),f=localStorage.getItem("trello_token"),g=d.key,h=localStorage.getItem("gagnatorg_key"),i=localStorage.getItem("trello_NewCardlistId");!function(){c.get("/lists/"+e+"/cards").then(function(b){console.log("machines",b.data),a.machines=b.data,a.pleaseWait=!1})["catch"](function(a){console.warn(a),alert("Can not read machines list,please, check LSkeys .")}),a.pleaseWait=!0}(),a.enterKT=function(b){13===b.which&&a.fetchCustomer()},a.fetchCustomer=function(){var c={method:"GET",params:{redirect:""},url:"https://api.ja.is/skra/v1/kennitolur/"+a.kt,headers:{Authorization:h}};b(c).then(function(b){var c=b.data;console.log("we got KT ",c),"person"===c.type?(a.leigutaki=c.name,a.heimili=c.permanent_address.street.dative+" "+c.permanent_address.postal_code+c.permanent_address.town.dative,a.kennitala=Number(c.kennitala)):"business"===c.type&&(a.leigutaki=c.full_name,a.heimili=c.legal_address.street.dative+" "+c.legal_address.postal_code+c.legal_address.town.dative,a.kennitala=Number(c.kennitala),c.date_bankrupt&&alert(" ATH fyrirtæki er  gjaldþrota"))},function(a){alert(" Villan. Gagnatorg : ",a.statusText),console.warn(a.status)})},a.createCard=function(){var b={leigutaki:a.leigutaki,kennitala:a.kennitala,heimili:a.heimili,umb:a.umb,notkunarst:a.notkunarst,simi:a.simi,taekisnumer:a.taekisnumer,tengil:a.tengil,verknumer:a.verknumer,bnumer:a.bnumer,simi2:a.simi2,chosenMachine:a.chosenMachine.name,netf:a.netf,ath:a.ath,einverd:a.einverd,magn:a.magn,filgihlutir:a.filgihlutir,triv:a.triv,olia:a.olia,bensin:a.bensin,gas:a.gas,flutningur:a.flutningur,stor:a.stor,litill:a.litill,leigutiminLykur:a.leigutiminLykur,leigutimin2:a.leigutimin2,leigutiminLykur2:a.leigutiminLykur2},c=JSON.stringify(b);console.log("description  obj ",b),console.log("description  string ",c);var d=new FormData;d.append("token",f),d.append("key",g),d.append("name","Leigut.:"+a.leigutaki+"; Tæki:"+a.chosenMachine.name+" ;  Ntk.St.: "+a.notkunarst+"; Sími: "+a.simi),d.append("desc",c),a.leigutimin&&d.append("due",a.leigutimin);var e=new XMLHttpRequest;e.open("POST","https://api.trello.com/1/cards?idList="+i),e.onreadystatechange=function(){4===e.readyState&&(e.status>=200&&e.status<300||304===e.status?(alert("Trell card for "+a.leigutaki+" is  created "),a.leigutaki="",a.kennitala="",a.heimili="",a.umb="",a.notkunarst="",a.simi="",a.taekisnumer="",a.tengil="",a.verknumer="",a.bnumer="",a.simi2="",a.chosenMachine="",a.netf="",a.ath="",a.einverd="",a.magn="",a.filgihlutir="",a.triv="",a.olia="",a.bensin="",a.gas="",a.flutningur="",a.stor=!1,a.litill=!1,a.leigutimin=void 0,a.leigutiminLykur=void 0):alert("Error creating a new card"))},e.send(d)}}]),angular.module("trelloApp").controller("LskeysCtrl",["$scope","TrelloClient","TrelloClientConfig",function(a,b,c){a.trelloKey=localStorage.getItem("trello_key")||"",a.gagnatorgKey=localStorage.getItem("gagnatorg_key")||"",a.trelloToken=localStorage.getItem("trello_token")||"",a.savedBoard=!1,a.savedList=!1,a.savedMachinesList=!1,a.savedDriverList=!1;var d=localStorage.getItem("trello_DriverListId")||!1,e=localStorage.getItem("trello_MachinesListId")||!1,f=localStorage.getItem("trello_NewCardlistId")||!1;a.toLocalStorage=function(){localStorage.setItem("trello_key",a.trelloKey),localStorage.setItem("gagnatorg_key",a.gagnatorgKey),localStorage.setItem("trello_token",a.trelloToken),alert("SUBMITTED")},function(){b.get("/members/me/boards").then(function(b){console.log("Boards ?",b.data),a.trelloBoards=b.data})["catch"](function(a){console.warn(a)})}(),d&&b.get("/lists/"+d).then(function(b){console.log("trello driver-user list",b),a.userListName=b.data.name})["catch"](function(a){console.warn(a),alert("Can not read USER list,please, check LSkeys .")}),e&&b.get("/lists/"+e+"/name").then(function(b){console.log("machines list",b),a.machinesListName=b.data._value})["catch"](function(a){console.warn(a),alert("Can not read machines list,please, check LSkeys .")}),f&&b.get("/lists/"+f+"/name").then(function(b){console.log("NEW CARD LIST NAME",b.data._value),a.newCardListName=b.data._value})["catch"](function(a){console.warn(a),alert("Can not read machines list,please, check LSkeys .")}),a.saveBoard=function(){localStorage.setItem("trello_board",a.chosenBoard.shortLink),b.get("/boards/"+a.chosenBoard.shortLink+"/lists").then(function(b){console.log("lists ?",b.data),a.trelloLists=b.data,a.savedBoard=!0})["catch"](function(a){console.warn(a)})},a.saveMachinesBoard=function(){localStorage.setItem("trello_machines_board",a.chosenMachinesBoard.shortLink),b.get("/boards/"+a.chosenMachinesBoard.shortLink+"/lists").then(function(b){console.log("lists for machines ?",b.data),a.trelloMachinesLists=b.data,a.savedMachinesBoard=!0})["catch"](function(a){console.warn(a)})},a.saveNewCardList=function(){localStorage.setItem("trello_NewCardlistId",a.chosenNewCardList.id),a.savedList=!0},a.saveMachinesList=function(){localStorage.setItem("trello_MachinesListId",a.chosenMachineList.id),a.savedMachinesList=!0},a.saveDriverList=function(){localStorage.setItem("trello_DriverListId",a.chosenDriverList.id),a.savedDriverList=!0}}]),angular.module("trelloApp").controller("DrivercardCtrl",["$scope","$routeParams","TrelloClient","TrelloClientConfig","$filter","$location","$http",function(a,b,c,d,e,f,g){function h(){c.get("/cards/"+i).then(function(b){console.log("resolved promise ",b.data),a.cardData=b.data,a.descObj=JSON.parse(a.cardData.desc),console.log("parsed desc",a.descObj),a.leigutiminDagPDF=e("date")(a.cardData.due,"yyyy-MM-dd"),a.leigutiminKlPDF=e("date")(a.cardData.due,"HH:mm"),a.leigutaki=a.descObj.leigutaki,a.kennitala=a.descObj.kennitala,a.heimili=a.descObj.heimili,a.umb=a.descObj.umb,a.notkunarst=a.descObj.notkunarst,a.simi=a.descObj.simi,a.taekisnumer=a.descObj.taekisnumer,a.tengil=a.descObj.tengil,a.verknumer=a.descObj.verknumer,a.bnumer=a.descObj.bnumer,a.simi2=a.descObj.simi2,a.chosenMachine=a.descObj.chosenMachine,a.netf=a.descObj.netf,a.ath=a.descObj.ath,a.einverd=a.descObj.einverd,a.magn=a.descObj.magn,a.filgihlutir=a.descObj.filgihlutir,a.triv=a.descObj.triv,a.olia=a.descObj.olia,a.bensin=a.descObj.bensin,a.gas=a.descObj.gas,a.flutningur=a.descObj.flutningur,a.stor=a.descObj.stor,a.litill=a.descObj.litill,a.leigutiminLykur=a.descObj.leigutiminLykur,a.leigutimin2=a.descObj.leigutimin2||"",a.leigutiminLykur2=a.descObj.leigutiminLykur2||"",a.pleaseWait=!1}),a.pleaseWait=!0}a.cardData="",a.chosenMachine="velja tæki",a.dateToday=new Date(Date.now()),a.ath="";var i=b.cardID;c.get("/cards/"+i+"/attachments").then(function(b){console.log("all attachments ",b),a.foundAttachment=b.data.length>0?!0:!1,console.log("found Attachments",a.foundAttachment),h()}),a.updateDriverCard=function(){function b(){var b={leigutaki:a.leigutaki,kennitala:a.kennitala,heimili:a.heimili,umb:a.umb,notkunarst:a.notkunarst,simi:a.simi,taekisnumer:a.taekisnumer,tengil:a.tengil,verknumer:a.verknumer,bnumer:a.bnumer,simi2:a.simi2,chosenMachine:a.chosenMachine,netf:a.netf,ath:a.ath,einverd:a.einverd,magn:a.magn,filgihlutir:a.filgihlutir,triv:a.triv,olia:a.olia,bensin:a.bensin,gas:a.gas,flutningur:a.flutningur,stor:a.stor,litill:a.litill,leigutiminLykur:a.leigutiminLykur,leigutimin2:a.leigutimin2,leigutiminLykur2:a.leigutiminLykur2},d=JSON.stringify(b);console.log("description  obj ",b),console.log("description  string ",d);var e={method:"PUT",url:"https://api.trello.com/1/cards/"+i+"/desc?value="+d,params:{token:c,key:h}};g(e).then(function(a){console.log("reply from http ",a)},function(a){alert("Get ekki lesið trello ")}),alert(" Leigusamningur fyrir"+a.descObj.leigutaki+" hefur verið sent i Trello ",f.path("list/"))}var c=localStorage.getItem("trello_token"),h=d.key;if(a.foundAttachment===!1){var j,k=a.signature.dataUrl;j=k.split(",")[0].indexOf("base64")>=0?atob(k.split(",")[1]):unescape(k.split(",")[1]);for(var l=(k.split(",")[0].split(":")[1].split(";")[0],new Uint8Array(j.length)),m=0;m<j.length;m++)l[m]=j.charCodeAt(m);var n=new Blob([l]),o=new FormData;o.append("token",c),o.append("key",h),o.append("file",n,"Undirscrift"+e("date")(Date.now(),"yyyy-MM-dd-HH-mm")+".png");var p=new XMLHttpRequest;p.open("POST","https://api.trello.com/1/cards/"+i+"/attachments"),p.send(o)}b()},a.showContract=function(){a.contractVisible?a.contractVisible=!1:a.contractVisible=!0}}]),angular.module("trelloApp").controller("AccountantsCtrl",["$scope","$routeParams","TrelloClient","TrelloClientConfig","$filter","$location","$http",function(a,b,c,d,e,f,g){function h(){c.get("/cards/"+i+"/attachments/"+a.firstAttachmentID).then(function(b){function c(a){for(var b="",c=new Uint8Array(a),d=c.byteLength,e=0;d>e;e++)b+=String.fromCharCode(c[e]);return window.btoa(b)}console.log("attachment data ,",b.data.url),a.attachmentURl=b.data.url,g({method:"GET",url:a.attachmentURl,responseType:"arraybuffer"}).then(function(b){console.log(b),a.imgBase64=c(b.data)},function(a){console.error("error in getting static img."),alert("Please enable CORS plugin to get signatue.")})})}a.cardData="",a.chosenMachine="velja tæki",a.dateToday=new Date(Date.now()),a.ath="";var i=b.cardID;c.get("/cards/"+i).then(function(b){console.log("resolved promise ",b.data),a.cardData=b.data,a.descObj=JSON.parse(a.cardData.desc),console.log("parsed desc",a.descObj),a.leigutaki=a.descObj.leigutaki,a.kennitala=a.descObj.kennitala,a.heimili=a.descObj.heimili,a.umb=a.descObj.umb,a.notkunarst=a.descObj.notkunarst,a.simi=a.descObj.simi,a.taekisnumer=a.descObj.taekisnumer,a.tengil=a.descObj.tengil,a.verknumer=a.descObj.verknumer,a.bnumer=a.descObj.bnumer,a.simi2=a.descObj.simi2,a.chosenMachine=a.descObj.chosenMachine,a.netf=a.descObj.netf,a.ath=a.descObj.ath,a.einverd=a.descObj.einverd,a.magn=a.descObj.magn,a.filgihlutir=a.descObj.filgihlutir,a.triv=a.descObj.triv,a.olia=a.descObj.olia,a.bensin=a.descObj.bensin,a.gas=a.descObj.gas,a.flutningur=a.descObj.flutningur,a.stor=a.descObj.stor,a.litill=a.descObj.litill,a.leigutimin=new Date(a.cardData.due),a.leigutiminLykur=a.descObj.leigutiminLykur?new Date(a.descObj.leigutiminLykur):null,a.descObj.leigutimin2?a.leigutimin2=new Date(a.descObj.leigutimin2):a.leigutimin2=null,a.leigutiminLykur2=a.descObj.leigutiminLykur2?new Date(a.descObj.leigutiminLykur2):null,a.pleaseWait=!1}),a.pleaseWait=!0,c.get("/cards/"+i+"/attachments").then(function(b){console.log("all attachments data ",b),b.data.length>0?(a.firstAttachmentID=b.data[0].id,h()):(a.noSignature=!0,a.imgBase64="iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAADElEQVR42mNgoBMAAABpAAEvwz4LAAAAAElFTkSuQmCC")}),a.showDate2=function(){a.date2visible?a.date2visible=!1:a.date2visible=!0},a.updateCard=function(){var b=localStorage.getItem("trello_token"),c=d.key,f={leigutaki:a.leigutaki,kennitala:a.kennitala,heimili:a.heimili,umb:a.umb,notkunarst:a.notkunarst,simi:a.simi,taekisnumer:a.taekisnumer,tengil:a.tengil,verknumer:a.verknumer,bnumer:a.bnumer,simi2:a.simi2,chosenMachine:a.chosenMachine,netf:a.netf,ath:a.ath,einverd:a.einverd,magn:a.magn,filgihlutir:a.filgihlutir,triv:a.triv,olia:a.olia,bensin:a.bensin,gas:a.gas,flutningur:a.flutningur,stor:a.stor,litill:a.litill,leigutiminLykur:a.leigutiminLykur,leigutimin2:a.leigutimin2,leigutiminLykur2:a.leigutiminLykur2},h=JSON.stringify(f);console.log("description  obj ",f),console.log("description  string ",h);var j={method:"PUT",url:"https://api.trello.com/1/cards/"+i+"/desc?value="+h,params:{token:b,key:c}};g(j).then(function(a){console.log("reply from http ",a)},function(a){alert("Get ekki lesið trello ")}),a.leigutiminDagPDF=e("date")(a.leigutimin,"yyyy-MM-dd"),a.leigutiminKlPDF=e("date")(a.leigutimin,"HH:mm"),a.leigutiminLykurDagPDF=e("date")(a.leigutiminLykur,"yyyy-MM-dd")||"",a.leigutiminLykurKlPDF=e("date")(a.leigutiminLykur,"HH:mm")||"",a.leigutiminDagPDF2=e("date")(a.leigutimin2,"yyyy-MM-dd")||"",a.leigutiminKlPDF2=e("date")(a.leigutimin2,"HH:mm")||"",a.leigutiminLykurDagPDF2=e("date")(a.leigutiminLykur2,"yyyy-MM-dd")||"",a.leigutiminLykurKlPDF2=e("date")(a.leigutiminLykur2,"HH:mm")||"";var k={method:"PUT",url:"https://api.trello.com/1/cards/"+i+"/due?value="+a.leigutimin,params:{token:b,key:c}};g(k).then(function(a){console.log("reply from http ",a)},function(a){alert("Get ekki lesið trello ")}),alert(" Leigusamningur fyrir"+a.descObj.leigutaki+" hefur verið uppfært ")},a.showPdf=function(){a.updateCard();var b={info:{title:"Leigusamningur",author:"Tæki.is",subject:a.kennitala,keywords:a.leigutaki},pageMargins:[50,100,50,50],content:["\n",{columns:[{width:"17%",text:"Leigutaki:",bold:!0,style:"taeki"},{width:"50%",text:a.leigutaki||"",style:"taeki"},{width:"14%",text:"Kt.:",bold:!0,style:"taeki"},{width:"19%",text:a.kennitala||"",style:"taeki"}]},"\n",{columns:[{width:"17%",text:"Heimili:",bold:!0,style:"taeki"},{width:"50%",text:a.heimili||"",style:"taeki"},{width:"14%",text:"Umb.:",bold:!0,style:"taeki"},{width:"19%",text:a.umb||"",style:"taeki"}]},"\n",{columns:[{width:"17%",text:"Notkunarst.:",bold:!0,style:"taeki"},{width:"50%",text:a.notkunarst||"",style:"taeki"},{width:"14%",text:"Sími:",bold:!0,style:"taeki"},{width:"19%",text:a.simi||"",style:"taeki"}]},"\n",{columns:[{width:"17%",text:"Tækisnúmer:",bold:!0,style:"taeki"},{width:"50%",text:a.taekisnumer||"",style:"taeki"},{width:"14%",text:"Tengil.:",bold:!0,style:"taeki"},{width:"19%",text:a.tengil||"",style:"taeki"}]},"\n",{columns:[{width:"17%",text:"Verknúmer:",bold:!0,style:"taeki"},{width:"50%",text:a.verknumer||"",style:"taeki"},{width:"14%",text:"Sími 2:",bold:!0,style:"taeki"},{width:"19%",text:a.simi2||"",style:"taeki"}]},"\n",{columns:[{width:"17%",text:"Tækislýsing:",bold:!0,style:"taeki"},{width:"50%",text:a.chosenMachine||"",style:"taeki"},{width:"14%",text:"Netf.:",bold:!0,style:"taeki"},{width:"19%",text:a.netf||"",style:"taeki"}]},"\n",{columns:[{width:"17%",text:"Magn:",bold:!0,style:"taeki"},{width:"50%",text:a.magn||"",style:"taeki"},{width:"14%",text:"Ein. verð:",bold:!0,style:"taeki"},{width:"19%",text:a.einverd||"",style:"taeki"}]},"\n",{columns:[{width:"17%",text:"ATH.:",bold:!0,style:"taeki"},{width:"50%",text:a.ath||"",style:"taeki"},{width:"14%",text:"Beiðnaúmer:",bold:!0,style:"taeki"},{width:"19%",text:a.bnumer||"",style:"taeki"}]},"\n",{columns:[{width:"17%",text:"Flutningur:",bold:!0,style:"taeki"},{width:"50%",text:a.flutningur||"",style:"taeki"},{width:"14%",text:"Eldsneyti:",bold:!0,style:"taeki"},{width:"19%",text:"",style:"taeki"}]},"\n",{columns:[{width:"5%",text:"Stór",bold:!0,style:"taeki"},{width:"5%",text:a.stor?"X":"",style:"taeki"},{width:"5%",text:"Lítill",bold:!0,style:"taeki"},{width:"55%",text:a.litill?"X":"",style:"taeki"},{width:"*",text:"  Olía:",bold:!0,style:"taeki"},{width:"*",text:a.olia+" kr./l."||"",style:"taeki"}]},"\n",{columns:[{width:"17%",text:"Fylgihlutir:",bold:!0,style:"taeki"},{width:"53%",text:a.filgihlutir||"",style:"taeki"},{width:"*",text:"Bensín:",bold:!0,style:"taeki"},{width:"*",text:a.bensin+" kr./l."||"",style:"taeki"}]},"\n",{columns:[{width:"17%",text:"Þrif á tæki:",bold:!0,style:"taeki"},{width:"53%",text:a.triv||"",style:"taeki"},{width:"*",text:"Gas:",bold:!0,style:"taeki"},{width:"*",text:a.gas+" kr./l."||"",style:"taeki"}]},"\n",{style:"tableExample",table:{headerRows:1,widths:["*","*","*","*"],body:[[{text:"Leigutími hefst",style:"taeki",bold:!0},{text:"Leigutíma lýkur",style:"taeki",bold:!0},{text:"Leigutími hefst",style:"taeki",bold:!0},{text:"Leigutíma lýkur",style:"taeki",bold:!0}],[{text:"Dag.: "+a.leigutiminDagPDF,style:"taeki"},{text:"Dag.: "+a.leigutiminLykurDagPDF,style:"taeki"},{text:"Dag.: "+a.leigutiminDagPDF2,style:"taeki"},{text:"Dag.: "+a.leigutiminLykurDagPDF2,style:"taeki"}],[{text:"Kl.:    "+a.leigutiminKlPDF,style:"taeki"},{text:"Kl.:    "+a.leigutiminLykurKlPDF,style:"taeki"},{text:"Kl.:    "+a.leigutiminKlPDF2,style:"taeki"},{text:"Kl.:    "+a.leigutiminLykurKlPDF2,style:"taeki"}]]},layout:"noBorders"},{text:"LEIGUSKILMÁLAR",style:"header",fontSize:10,bold:!0,alignment:"center",margin:[0,20,0,7]},{fontSize:8,ol:["  Ofangreint tæki ásamt fylgihlutum hefur leigusali afhent leigutaka í fullkomnu lagi, sem leigutaki hefur kynnt sér.\nLeigutaki hefur einnig kynnt sér notkun og meðferð tækisins. ","Leigutaki skal sjá um allan rekstur tækisins á meðan hann hefur það á leigu, svo sem smurningu, smurolíu, eldsneyti, þrif o.fl. \n","Leigutaki er ábyrgur fyrir tjóni sem kann að verða á tækinu og fylgihlutum þess vegna ógætilegrar og/eða rangrar notkunar.\n","Leigutaki ber fulla ábyrgð ef tæki tapast eða því er stolið úr vörslu hans. Ber leigutaka að greiða að fullu andvirði tækisins\nauk leigu til þess tíma að uppgjör hefur farið fram.","Leigusali er á engan hátt ábyrgur vegna slysa eða skemmda er kynnu að orsakast af notkun, meðferð eða flutningi á tækjum \ner hann leigir út. Sama gildir um vinnustöðvun sem orsakast vegna bilunar á útleigðum tækjum.","Leigugjald reiknast frá þeim tíma að tækið er afhent þar til því er skilað til leigusala. Greiða ber ávallt lágmarksleigu.\n","Ef um langtímaleigu er að ræða, getur leigusali krafist leigu mánaðarlega samkvæmt reikningi. Ef reikningur er ekki greiddur \n 20 dögum eftir úttektarmánuð reiknast lögleyfðir dráttarvextir.","Leiga getur breyst samkvæmt gjaldskrá á útleigutímabilinu. Leigusali áskilur sér rétt til að reikna leigu samkvæmt nýrri gjaldskrá\n er hún hefur tekið gildi.","Leigutaka er óheimilit að lána eða framleigja þau tæki sem hann hefur á leigu nema með skriflegu samþykki leigusala\n","Leigutaki greiðir allan kostnað af flutningi tækisins.\n","Leigusali hefur rétt til hvenær sem honum þóknast að skoða ástand tækisins.\n","Ef leigutaki stendur ekki skil á leigugreiðslum eða brýtur í bága við leigusamning þennan, getur leigusali sótt hið leigða til  \nleigutaka, en er það ekki skylt. Leigusali getur fengið til liðs við sig viðkomandi fógeta eða lögreglu.\nLeigutaki ber allan kostnað af þessum aðgerðum. ","Leigutaki hefur kynnt sér leiguskilmálana og samþykkir þá með undirskrift sinni.\n\n\n"]},{columns:[{text:"F.H. leigutaka:"},{image:"data:image/png;base64,"+a.imgBase64||"",fit:[100,100]},{text:"F.H.Tæki ehf:"},{text:""}]}],styles:{taeki:{fontSize:9},taekib:{fontSize:9,bold:!0}}};if(a.imgBase64){var c=pdfMake.createPdf(b);c.open()}else alert(" ATH ! Samningur hefur ekki verið undirskrifað. ")}}]),angular.module("trelloApp").controller("ListaccountantCtrl",["$scope","TrelloClient","TrelloClientConfig","$location","$http",function(a,b,c,d,e){function f(){b.get("/lists/"+g).then(function(b){console.log(b),a.listName=b.data.name})}var g=localStorage.getItem("trello_DriverListId"),h=localStorage.getItem("trello_key"),i=localStorage.getItem("trello_token");f(),a.getList=function(){var b={method:"GET",url:"https://api.trello.com/1/lists/"+g+"/cards",params:{token:i,key:h}};e(b).then(function(b){console.log("http ",b),a.cards=b.data.filter(function(a){try{JSON.parse(a.desc)}catch(b){return!1}return!0})},function(a){alert("Get ekki lesið trello ")})}}]),angular.module("trelloApp").controller("AgreementCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),angular.module("trelloApp").run(["$templateCache",function(a){a.put("views/accountants.html",'<p>This is the accountants view.</p> <div ng-show="pleaseWait" class="alert alert-danger" role="alert"> Vinsamlega biðið. </div> <div ng-show="noSignature"> <span class="badge badge-primary" style="background-color: #e4135d"> ATH. Vantar undirskrift i viðhengi.</span> </div> <hr style="border-color: red"> <div> <form name="newCardForm"> <!--TODO fetch  costomer data on kt enter key  --> <div class="form-row"> <div class="form-group col-md-8"> <label for="Leigutaki">Leigutaki<span style="font-size: x-small">*reqired</span></label> <input ng-model="leigutaki" type="text" class="form-control" id="Leigutaki" placeholder="Leigutaki" required> </div> <div class="form-group col-md-4"> <label for="kt">Kennitala<span style="font-size: x-small">*reqired</span></label> <input ng-model="kennitala" type="number" class="form-control" id="kt" placeholder="Kennitala" required> </div> </div> <div class="form-row"> <div class="form-group col-md-8"> <label for="Heimili">Heimili</label> <input ng-model="heimili" type="text" class="form-control" id="Heimili" placeholder="Heimili"> </div> <div class="form-group col-md-4"> <label for="umb">Umb.:</label> <input ng-model="umb" type="text" class="form-control" id="umb" placeholder="Umb."> </div> </div> <div class="form-row"> <div class="form-group col-md-8"> <label for="Notkunarst">Notkunarst.:</label> <input ng-model="notkunarst" type="text" class="form-control" id="Notkunarst" placeholder="Notkunarst."> </div> <div class="form-group col-md-4"> <label for="simi">Sími:</label> <input ng-model="simi" type="tel" class="form-control" id="simi" placeholder="Sími"> </div> </div> <div class="form-row"> <div class="form-group col-md-8"> <label for="taekisnumer">Tækisnúmer:</label> <input ng-model="taekisnumer" type="text" class="form-control" id="taekisnumer" placeholder="Tækisnúmer"> </div> <div class="form-group col-md-4"> <label for="tengil">Tengil.:</label> <input ng-model="tengil" type="text" class="form-control" id="tengil" placeholder="Tengil.:"> </div> </div> <div class="form-row"> <div class="form-group col-md-4"> <label for="verknumer">Verknúmer:</label> <input ng-model="verknumer" type="text" class="form-control" id="verknumer" placeholder="Verknúmer"> </div> <div class="form-group col-md-4"> <label for="bnumer">Beiðnaúmer:</label> <input ng-model="bnumer" type="text" class="form-control" id="bnumer" placeholder="Beiðnaúmer:"> </div> <div class="form-group col-md-4"> <label for="simi2">Sími 2:</label> <input ng-model="simi2" type="text" class="form-control" id="simi2" placeholder="Sími 2:"> </div> </div> <div class="form-row"> <div class="form-group col-md-8"> <label for="tl">Tækislýsing:</label> <input ng-model="chosenMachine" type="text" class="form-control" id="tl"> </div> <div class="form-group col-md-4"> <label for="netf">Netf.:</label> <input ng-model="netf" type="email" class="form-control" id="netf" placeholder="Netf.:"> </div> </div> <div class="form-row"> <div class="form-group col-md-12"> <label for="ath">ATH.:</label> <input ng-model="ath" type="text" class="form-control" id="ath" placeholder="ATH."> </div> </div> <div class="form-row"> <div class="form-group col-md-6"> <label for="einverd">Ein. verð:</label> <input ng-model="einverd" type="number" class="form-control" id="einverd" placeholder="Ein. verð."> </div> <div class="form-group col-md-6"> <label for="magn">Magn:</label> <input ng-model="magn" type="number" class="form-control" id="magn" placeholder="Magn.:"> </div> </div> <div class="form-row"> <div class="form-group col-md-6"> <label for="filgihlutir">Fylgihlutir:</label> <input ng-model="filgihlutir" type="text" class="form-control" id="filgihlutir" placeholder="Fylgihlutir"> </div> <div class="form-group col-md-6"> <label for="triv">Þrif á tæki:</label> <input ng-model="triv" type="text" class="form-control" id="triv" placeholder="Þrif"> </div> </div> <div class="form-row"> <div class="form-group col-md-4"> <label for="olia">Olía:</label> <input ng-model="olia" type="text" class="form-control" id="olia" placeholder="Olía"> </div> <div class="form-group col-md-4"> <label for="bensin">Beisín:</label> <input ng-model="bensin" type="text" class="form-control" id="bensin" placeholder="Bensín:"> </div> <div class="form-group col-md-4"> <label for="gas">Gas:</label> <input ng-model="gas" type="text" class="form-control" id="gas" placeholder="Gas"> </div> </div> <div class="form-row"> <div class="form-group col-md-6"> <label for="flutningur">Flutningur:</label> <input ng-model="flutningur" type="text" class="form-control" id="flutningur" placeholder="Flutningur"> </div> <div class="form-group col-md-3"> <label>&nbsp;</label> <div> <label> <input ng-model="stor" class="form-check-input" type="checkbox"> Stór </label> </div> </div> <div class="form-group col-md-3"> <label>&nbsp;</label> <div> <label> <input ng-model="litill" class="form-check-input" type="checkbox"> Lítill </label> </div> </div> </div> &nbsp; <p> <!--\n                {{leigutimin}}\n\n                Lykur :\n                {{leigutiminLykur}}\n                <p />\n                leigutiminDagPDF\n                {{leigutiminDagPDF}}\n        <p />\n               check var  leigutiminLykurDagPDF\n                {{leigutiminLykurDagPDF}}\n        --> <div class="form-row"> <div class="form-group col-md-6"> <label for="leigutimin">Leigutímin hefst:<span style="font-size: x-small">*reqired</span></label> <input ng-model="leigutimin" type="datetime-local" class="form-control" id="leigutimin" required> </div> <div class="form-group col-md-6"> <label for="leigutiminLykur">Leigutíma lýkur:<span style="font-size: x-small"></span></label> <input ng-model="leigutiminLykur" type="datetime-local" class="form-control" id="leigutiminLykur"> </div> </div> <div class="form-row"> <div class="form-group col-md-12"> <button ng-click="showDate2()" type="button" class="btn btn-secondary btn-sm">Bæta ný dagsetning.</button> </div> </div> <div ng-show="date2visible" class="form-row"> <div class="form-group col-md-6"> <label for="leigutimin2">Leigutímin 2 hefst:<span style="font-size: x-small"></span></label> <input ng-model="leigutimin2" type="datetime-local" class="form-control" id="leigutimin2"> </div> <div class="form-group col-md-6"> <label for="leigutiminLykur2">Leigutíma 2 lýkur:<span style="font-size: x-small"></span></label> <input ng-model="leigutiminLykur2" type="datetime-local" class="form-control" id="leigutiminLykur2"> </div> </div> <div class="row"> <div class="col-md-12" style="bottom: 20px"> <img data-ng-src="data:image/png;base64,{{imgBase64}}"> </div> <br> </div> <br> <h4>Undriskrfit F.hönd Leigutaka:</h4> <br> <!--TODO add form validation on card creation--> <button ng-disabled="newCardForm.$invalid" ng-click="updateCard()" type="submit" class="btn btn-primary btn-lg btn-block">Uppfære leigusamning </button> <br> <button ng-click="showPdf()" class="btn btn-primary btn-lg btn-block">Show PDF </button> </form> </div>'),
a.put("views/agreement.html","<p>This is the agreement view.</p> <h4>Leiguskilmálar:</h4> 1. Ofangreint tæki ásamt fylgihlutum hefur leigusali afhent leigutaka í fullkomnu lagi, sem leigutaki hefur kynnt sér. Leigutaki hefur einnig kynnt sér notkun og meðferð tækisins. 2. Leigutaki skal sjá um allan rekstur tækisins á meðan hann hefur það á leigu, svo sem smurningu, smurolíu, eldsneyti, þrif o.fl. 3. Leigutaki er ábyrgur fyrir tjóni sem kann að verða á tækinu og fylgihlutum þess vegna ógætilegrar og/eða rangrar notkunar. 4. Leigutaki ber fulla ábyrgð ef tæki tapast eða því er stolið úr vörslu hans. Ber leigutaka að greiða að fullu andvirði tækisins, auk leigu til þess tíma að uppgjör hefur farið fram. 5. Leigusali er á engan hátt ábyrgur vegna slysa eða skemmda er kynnu að orsakast af notkun, meðferð eða flutningi á tækjum er hann leigir út. Sama gildir um vinnustöðvun sem orsakast vegna bilunar á útleigðum tækjum. 6. Leigugjald reiknast frá þeim tíma að tækið er afhent þar til því er skilað til leigusala. Greiða ber ávallt lágmarksleigu. 7. Ef um langtímaleigu er að ræða, getur leigusali krafist leigu mánaðarlega samkvæmt reikningi. Ef reikningur er ekki greiddur 20 dögum eftir úttektarmánuð reiknast lögleyfðir dráttarvextir. 8. Leiga getur breyst samkvæmt gjaldskrá á útleigutímabilinu. Leigusali áskilur sér rétt til að reikna leigu samkvæmt nýrri gjaldskrá er hún hefur tekið gildi. 9. Leigutaka er óheimilit að lána eða framleigja þau tæki sem hann hefur á leigu nema með skriflegu samþykki leigusala. 10. Leigutaki greiðir allan kostnað af flutningi tækisins. 11. Leigusali hefur rétt til hvenær sem honum þóknast að skoða ástand tækisins. 12. Ef leigutaki stendur ekki skil á leigugreiðslum eða brýtur í bága við leigusamning þennan, getur leigusali sótt hið leigða til leigutaka, en er það ekki skylt. Leigusali getur fengið til liðs við sig viðkomandi fógeta eða lögreglu. Leigutaki ber allan kostnað af þessum aðgerðum. 13. Leigutaki hefur kynnt sér leiguskilmálana og samþykkir þá með undirskrift sinni."),a.put("views/card.html",'<button ng-click="backToList()" class="btn btn-default"><span class="glyphicon glyphicon-chevron-left"></span>Til Bakka </button> <h3>Leigusamningur :</h3> <!--TODO make a BACK buttom on a left apper corner of every screen --> Tæki.is ehf kt. 650399-2859 og undirritaður leigutaki gera með sér svofelldan leigusamning <p> <div style="font-size: large"> <b>Leigutaki: {{descObj.leigutaki}}</b> <p> <b> Heimili : {{descObj.heimili}}</b> <p> <b> Umb. : {{descObj.umb}}</b> <p> <b>Leigutími hefst: {{cardData.due |date:\'yyyy-MM-dd HH:mm\'}}</b> <p> <b>TÆKI: {{descObj.chosenMachine}}</b> <br> <!--Leiga út  frá: <input type="date" ng-model="dateToday"> til: {{cardData.due| date}}--> <p> </div> <div class="container"> <br> <form> <div class="form-group row"> <label for="taekisnumer" class="col-sm-2 col-form-label">Tækisnúmer:</label> <div class="col-sm-10"> <input type="text" class="form-control" id="taekisnumer" placeholder="Tækisnúmer" ng-model="taekisnumer"> </div> </div> <div class="form-group row"> <label class="col-sm-2 col-form-label">ATH:</label> <div class="col-md-10"> <textarea ng-model="ath" rows="4" cols="50"></textarea> </div> </div> </form> </div> <br> <h4>Undriskrfit F.hönd Leigutaka:</h4> <br> <div ng-show="signature.dataUrl" style="background: white"> <img ng-src="{{ signature.dataUrl }}"> </div> <div ng-show="signature.dataUrl" style="margin-bottom: 100px"> <button class="btn btn-primary btn-lg btn-block" ng-click="create()">Senda leigusamning</button> <p></p> </div> <div class="row"> <div class="col-md-12" style="bottom: 20px"> <signature-pad style="outline: 0.1px dotted black" accept="accept" clear="clear" height="220" width="600" disabled></signature-pad> </div> <br> <p> <button class="btn btn-warning btn-lg btn-block" ng-click="clear()">Clear signature</button> <button class="btn btn-success btn-lg btn-block" ng-click="signature = accept()">Sign</button> <br> </div> <p></p> <div class="result" ng-show="signature"> </div> <h4>Leiguskilmálar:</h4> 1. Ofangreint tæki ásamt fylgihlutum hefur leigusali afhent leigutaka í fullkomnu lagi, sem leigutaki hefur kynnt sér. Leigutaki hefur einnig kynnt sér notkun og meðferð tækisins. 2. Leigutaki skal sjá um allan rekstur tækisins á meðan hann hefur það á leigu, svo sem smurningu, smurolíu, eldsneyti, þrif o.fl. 3. Leigutaki er ábyrgur fyrir tjóni sem kann að verða á tækinu og fylgihlutum þess vegna ógætilegrar og/eða rangrar notkunar. 4. Leigutaki ber fulla ábyrgð ef tæki tapast eða því er stolið úr vörslu hans. Ber leigutaka að greiða að fullu andvirði tækisins, auk leigu til þess tíma að uppgjör hefur farið fram. 5. Leigusali er á engan hátt ábyrgur vegna slysa eða skemmda er kynnu að orsakast af notkun, meðferð eða flutningi á tækjum er hann leigir út. Sama gildir um vinnustöðvun sem orsakast vegna bilunar á útleigðum tækjum. 6. Leigugjald reiknast frá þeim tíma að tækið er afhent þar til því er skilað til leigusala. Greiða ber ávallt lágmarksleigu. 7. Ef um langtímaleigu er að ræða, getur leigusali krafist leigu mánaðarlega samkvæmt reikningi. Ef reikningur er ekki greiddur 20 dögum eftir úttektarmánuð reiknast lögleyfðir dráttarvextir. 8. Leiga getur breyst samkvæmt gjaldskrá á útleigutímabilinu. Leigusali áskilur sér rétt til að reikna leigu samkvæmt nýrri gjaldskrá er hún hefur tekið gildi. 9. Leigutaka er óheimilit að lána eða framleigja þau tæki sem hann hefur á leigu nema með skriflegu samþykki leigusala. 10. Leigutaki greiðir allan kostnað af flutningi tækisins. 11. Leigusali hefur rétt til hvenær sem honum þóknast að skoða ástand tækisins. 12. Ef leigutaki stendur ekki skil á leigugreiðslum eða brýtur í bága við leigusamning þennan, getur leigusali sótt hið leigða til leigutaka, en er það ekki skylt. Leigusali getur fengið til liðs við sig viðkomandi fógeta eða lögreglu. Leigutaki ber allan kostnað af þessum aðgerðum. 13. Leigutaki hefur kynnt sér leiguskilmálana og samþykkir þá með undirskrift sinni.'),a.put("views/drivercard.html",'<p>This is the driverCard view.</p> <div ng-show="pleaseWait" class="alert alert-danger" role="alert"> Vinsamlega biðið. </div> <div ng-show="foundAttachment"> <span class="badge badge-primary" style="background-color: #337ab7"> ATH. Er með undirskrift i viðhengi.</span> </div> <div class="row"> <div class="col-md-6"> <strong>Leigutaki:</strong> {{leigutaki}}, </div> <div class="col-md-6"> <strong> Kennitala: </strong> {{kennitala}} </div> </div> <div class="row"> <div class="col-md-6"> <strong>Heimili:</strong> {{heimili}}, </div> <div class="col-md-6"> <strong> Umb.: </strong> {{umb}} </div> </div> <div class="row"> <div class="col-md-6"> <strong> Notkunarst.:</strong> {{ notkunarst}}, </div> <div class="col-md-6"> <strong> Sími: </strong> {{simi }} </div> </div> <div class="row"> <div class="col-md-6"> <strong>Tengil.: </strong> {{tengil }}, </div> <div class="col-md-6"> <strong> Verknúmer: </strong> {{verknumer }} </div> </div> <div class="row"> <div class="col-md-6"> <strong>Beiðnaúmer: </strong> {{ bnumer}}, </div> <div class="col-md-6"> <strong> Sími 2: </strong> {{simi2 }} </div> </div> <div class="row"> <div class="col-md-6"> <strong> Tækislýsing:</strong> {{ chosenMachine}}, </div> <div class="col-md-6"> <strong> Fylgihlutir: </strong> {{ filgihlutir}} </div> </div> <div class="row"> <div class="col-md-6"> <strong>Flutningur: </strong> {{flutningur }}, </div> <div class="col-md-6"> <strong> </strong> {{ }} </div> </div> <div class="row" ng-hide="foundAttachment"> <div class="col-md-12"> <button ng-click="showContract()" class="btn btn-block btn-secondary">Leiguskilmálar</button> </div> </div> <div class="row" ng-show="contractVisible"> <div> <h4>Leiguskilmálar:</h4> 1. Ofangreint tæki ásamt fylgihlutum hefur leigusali afhent leigutaka í fullkomnu lagi, sem leigutaki hefur kynnt sér. Leigutaki hefur einnig kynnt sér notkun og meðferð tækisins. 2. Leigutaki skal sjá um allan rekstur tækisins á meðan hann hefur það á leigu, svo sem smurningu, smurolíu, eldsneyti, þrif o.fl. 3. Leigutaki er ábyrgur fyrir tjóni sem kann að verða á tækinu og fylgihlutum þess vegna ógætilegrar og/eða rangrar notkunar. 4. Leigutaki ber fulla ábyrgð ef tæki tapast eða því er stolið úr vörslu hans. Ber leigutaka að greiða að fullu andvirði tækisins, auk leigu til þess tíma að uppgjör hefur farið fram. 5. Leigusali er á engan hátt ábyrgur vegna slysa eða skemmda er kynnu að orsakast af notkun, meðferð eða flutningi á tækjum er hann leigir út. Sama gildir um vinnustöðvun sem orsakast vegna bilunar á útleigðum tækjum. 6. Leigugjald reiknast frá þeim tíma að tækið er afhent þar til því er skilað til leigusala. Greiða ber ávallt lágmarksleigu. 7. Ef um langtímaleigu er að ræða, getur leigusali krafist leigu mánaðarlega samkvæmt reikningi. Ef reikningur er ekki greiddur 20 dögum eftir úttektarmánuð reiknast lögleyfðir dráttarvextir. 8. Leiga getur breyst samkvæmt gjaldskrá á útleigutímabilinu. Leigusali áskilur sér rétt til að reikna leigu samkvæmt nýrri gjaldskrá er hún hefur tekið gildi. 9. Leigutaka er óheimilit að lána eða framleigja þau tæki sem hann hefur á leigu nema með skriflegu samþykki leigusala. 10. Leigutaki greiðir allan kostnað af flutningi tækisins. 11. Leigusali hefur rétt til hvenær sem honum þóknast að skoða ástand tækisins. 12. Ef leigutaki stendur ekki skil á leigugreiðslum eða brýtur í bága við leigusamning þennan, getur leigusali sótt hið leigða til leigutaka, en er það ekki skylt. Leigusali getur fengið til liðs við sig viðkomandi fógeta eða lögreglu. Leigutaki ber allan kostnað af þessum aðgerðum. 13. Leigutaki hefur kynnt sér leiguskilmálana og samþykkir þá með undirskrift sinni. </div> </div> <!--\n\n<div class="row">\n    <div class="col-md-6">\n        <strong> </strong>  {{ }},\n    </div>\n    <div class="col-md-6">\n        <strong>  </strong>  {{ }}\n    </div>\n</div>\n\n--> <hr style="border-color: red"> <div> <form name="newCardForm"> <!--TODO fetch  costomer data on kt enter key  --> <!--   <div class="form-row">\n               <div class="form-group col-md-8">\n                   <label>Leigutaki<span style="font-size: x-small"></span></label>\n                   {{leigutaki}}\n               </div>\n               <div class="form-group col-md-4">\n                   <label>Kennitala</label>\n                   {{kennitala}}\n               </div>\n           </div>\n           <div class="form-row">\n               <div class="form-group col-md-8">\n                   <label>Heimili</label>\n                   {{heimili}}\n               </div>\n               <div class="form-group col-md-4">\n                   <label>Umb.:</label>\n                   {{umb}}\n               </div>\n           </div>\n           <div class="form-row">\n               <div class="form-group col-md-8">\n                   <label>Notkunarst.:</label>\n                   {{notkunarst}}\n               </div>\n               <div class="form-group col-md-4">\n                   <label>Sími:</label>\n                   {{simi}}\n               </div>\n           </div>\n           <div class="form-row">\n               &lt;!&ndash;    <div class="form-group col-md-8">\n                       <label for="taekisnumer">Tækisnúmer:</label>\n                       <input ng-model="taekisnumer" type="text" class="form-control" id="taekisnumer"\n                              placeholder="Tækisnúmer">\n                   </div>&ndash;&gt;\n               <div class="form-group col-md-4">\n                   <label>Tengil.:</label>\n                   {{tengil}}\n               </div>\n           </div>\n           <div class="form-row">\n               <div class="form-group col-md-4">\n                   <label>Verknúmer:</label>\n                   {{verknumer}}\n               </div>\n               <div class="form-group col-md-4">\n                   <label>Beiðnaúmer:</label>\n                   {{bnumer}}\n               </div>\n               <div class="form-group col-md-4">\n                   <label>Sími 2:</label>\n                   {{simi2}}\n               </div>\n           </div>\n\n   --> <div class="form-row"> <div class="form-group col-md-6"> <label for="taekisnumer">Tækisnúmer:</label> <input ng-model="taekisnumer" type="text" class="form-control" id="taekisnumer" placeholder="Tækisnúmer"> </div> <div class="form-group col-md-6"> <label for="triv">Þrif á tæki:</label> <input ng-model="triv" type="text" class="form-control" id="triv" placeholder="Þrif"> </div> </div> <div class="form-row"> <div class="form-group col-md-12"> <label for="ath">ATH.:</label> <input ng-model="ath" type="text" class="form-control" id="ath" placeholder="ATH."> </div> </div> <!--     <div class="form-row">\n         <div class="form-group col-md-6">\n             <label>Ein. verð:</label>\n             {{einverd}}\n         </div>\n         <div class="form-group col-md-6">\n             <label>Magn:</label>\n             {{magn}}\n         </div>\n     </div>\n--> <div class="form-row"> </div> <div class="form-row"> <div class="form-group col-md-4"> <label for="olia">Olía kr./l:</label> <input ng-model="olia" type="text" class="form-control" id="olia" placeholder="Olía"> </div> <div class="form-group col-md-4"> <label for="bensin">Beisín kr./l:</label> <input ng-model="bensin" type="text" class="form-control" id="bensin" placeholder="Bensín:"> </div> <div class="form-group col-md-4"> <label for="gas">Gas kr./l:</label> <input ng-model="gas" type="text" class="form-control" id="gas" placeholder="Gas"> </div> </div> <!--\n\n        <div class="form-row">\n\n            <div class="form-group col-md-3">\n                <label>&nbsp;</label>\n                <div>\n                    <label>\n                        <input ng-model="stor" class="form-check-input" type="checkbox"> Stór\n                    </label>\n                </div>\n            </div>\n            <div class="form-group col-md-3">\n                <label>&nbsp;</label>\n                <div>\n                    <label>\n                        <input ng-model="litill" class="form-check-input" type="checkbox"> Lítill\n                    </label>\n                </div>\n            </div>\n        </div>\n\n        <p/>\n--> <div ng-hide="foundAttachment" class="row"> <div class="col-md-12" style="bottom: 20px;    top: 20px;    margin-bottom: 50px;    left: 50px"> <signature-pad style="outline: 0.1px dotted black" accept="accept" clear="clear" height="220" width="600" disabled></signature-pad> </div> <br> <p> <button class="btn btn-warning btn-lg btn-block" ng-click="clear()">Clear signature</button> <button class="btn btn-success btn-lg btn-block" ng-click="signature = accept()">Sign</button> <br> </div> <div class="form-row"> <div class="form-group col-md-12"> <br> <h4>Undriskrfit F.hönd Leigutaka:</h4> <br> <div ng-show="signature.dataUrl" style="background: white"> <img ng-src="{{ signature.dataUrl }}"> </div> </div> </div> <!--TODO add form validation on card creation--> <button ng-disabled="newCardForm.$invalid" ng-click="updateDriverCard()" type="submit" class="btn btn-primary btn-lg btn-block">Create/update card </button> </form> </div>'),a.put("views/list.html",'<button class="btn btn-primary btn-lg btn-block" ng-click="getList()">Uppfæra &nbsp; <strong>{{listName}}</strong></button> <p> <hr style="border-color: red"> <p> <div> <ul class="list-group" ng-repeat="card in cards"> <!-- <a   href="#!/driverCard/{{card.id}}" class="list-group-item"><strong>{{card.name}}</strong><span class="glyphicon glyphicon-chevron-right"></span></a>--> <a href="#!/driverCard/{{card.id}}" class="list-group-item"><strong>{{card.name}}</strong><span class="glyphicon glyphicon-chevron-right"></span></a> </ul> </div>'),a.put("views/listaccountant.html",'<p>This is the listAccountant view.</p> <button class="btn btn-primary btn-lg btn-block" ng-click="getList()">Uppfæra &nbsp; <strong>{{listName}}</strong></button> <p> <hr style="border-color: red"> <p> <div> <ul class="list-group" ng-repeat="card in cards"> <!-- <a   href="#!/driverCard/{{card.id}}" class="list-group-item"><strong>{{card.name}}</strong><span class="glyphicon glyphicon-chevron-right"></span></a>--> <a href="#!/accountants/{{card.id}}" class="list-group-item"><strong>{{card.name}}</strong><span class="glyphicon glyphicon-chevron-right"></span></a> </ul> </div>'),a.put("views/lskeys.html",'<div ng-hide="trelloKey" class="alert alert-danger" role="alert"> The Trello KEY required ! </div> <div ng-hide="gagnatorgKey" class="alert alert-danger" role="alert"> The Gagnatorg KEY required ! </div> <div ng-hide="chosenBoard" class="alert alert-danger" role="alert"> Please choose a Trello Board ! </div> <a href="https://trello.com/app-key" target="_blank">Trello key </a> <form> <div class="form-group"> <label for="TrelloKey">Trello Key </label> <input ng-model="trelloKey" type="text" class="form-control" id="TrelloKey" aria-describedby="Trello key " placeholder="Enter Trello Key"> <small id="emailHelp" class="form-text text-muted"> Never share your KEY with anyone else.</small> </div> <div class="form-group"> <label for="gagnatorgKey">Gagnatorg Key </label> <input ng-model="gagnatorgKey" type="text" class="form-control" id="gagnatorgKey" placeholder="Gagnatorg KEY"> <small class="form-text text-muted"> Never share your KEY with anyone else.</small> </div> <div class="form-group"> <label for="trelloToken">Trello Token </label> <input ng-model="trelloToken" type="text" class="form-control" id="trelloToken" placeholder="TrelloToken"> <small class="form-text text-muted"> Never share your TOKEN with anyone else.</small> </div> <button ng-click="toLocalStorage()" type="submit" class="btn btn-primary">Submit</button> </form> <hr> <div> <label>Velja Trello Board :</label> <select class="form-control" ng-model="chosenBoard" ng-options="board.name for board in trelloBoards"></select> <button ng ng-show="chosenBoard" ng-click="saveBoard()">Velja</button> <span ng-show="savedBoard" class="badge">Success</span> </div> <p> <div ng-show="savedBoard" style="margin-left: 50px"> <div> <label>Velja Trello New Card List, núverandi er > {{newCardListName}}</label> <select class="form-control" ng-model="chosenNewCardList" ng-options="list.name for list in trelloLists"></select> <button ng ng-show="chosenNewCardList" ng-click="saveNewCardList()">Velja List</button> <span ng-show="savedList" class="badge badge-success">Success</span> </div> <div> <label>Velja Trello Notenda List , núverandi er > {{userListName}} :</label> <select class="form-control" ng-model="chosenDriverList" ng-options="list.name for list in trelloLists"></select> <button ng ng-show="chosenDriverList" ng-click="saveDriverList()">Velja List</button> <span ng-show="savedDriverList" class="badge badge-success">Success</span> </div> </div> <hr> <div> <label>Velja Trello MACHINES Board :</label> <select class="form-control" ng-model="chosenMachinesBoard" ng-options="machinesBoard.name for machinesBoard in trelloBoards"></select> <button ng ng-show="chosenMachinesBoard" ng-click="saveMachinesBoard()">Velja</button> <span ng-show="savedMachinesBoard" class="badge">Success</span> </div> <p> <div ng-show="savedMachinesBoard" style="margin-left: 50px"> <label>Velja Trello Machines List , núverandi er > {{machinesListName}}</label> <select class="form-control" ng-model="chosenMachineList" ng-options="list.name for list in trelloMachinesLists"></select> <button ng ng-show="chosenMachineList" ng-click="saveMachinesList()">Velja List</button> <span ng-show="savedMachinesList" class="badge badge-success">Success</span> </div>'),a.put("views/main.html",'<div class="row"> <div class="col-lg-12 text-center"> <button class="btn btn-primary btn-lg btn-block" ng-click="authenticate()">Authenticate</button> </div> <hr> </div>'),a.put("views/newcard.html",'<h1>New card</h1> <div ng-show="pleaseWait" class="alert alert-danger" role="alert"> Vinsamlega biðið. </div> <form name="ktInput"> <div class="input-group"> <input required ng-keypress="enterKT($event)" autofocus ng-minlength="10" ng-maxlength="10" ng-model="kt" type="number" class="form-control" placeholder="Slá kt. bara tölur 1234567890" aria-label="Leita i Þjóðskrá"> <span class="input-group-btn"> <button ng-disabled="ktInput.$invalid" ng-click="fetchCustomer()" class="btn btn-secondary" type="button">Leita</button> </span> </div> </form> <hr style="border-color: red"> <div> <form name="newCardForm"> <!--TODO fetch  costomer data on kt enter key  --> <div class="form-row"> <div class="form-group col-md-8"> <label for="Leigutaki">Leigutaki<span style="font-size: x-small">*reqired</span></label> <input ng-model="leigutaki" type="text" class="form-control" id="Leigutaki" placeholder="Leigutaki" required> </div> <div class="form-group col-md-4"> <label for="kt">Kennitala<span style="font-size: x-small">*reqired</span></label> <input ng-model="kennitala" type="number" class="form-control" id="kt" placeholder="Kennitala" required> </div> </div> <div class="form-row"> <div class="form-group col-md-8"> <label for="Heimili">Heimili</label> <input ng-model="heimili" type="text" class="form-control" id="Heimili" placeholder="Heimili"> </div> <div class="form-group col-md-4"> <label for="umb">Umb.:</label> <input ng-model="umb" type="text" class="form-control" id="umb" placeholder="Umb."> </div> </div> <div class="form-row"> <div class="form-group col-md-8"> <label for="Notkunarst">Notkunarst.:</label> <input ng-model="notkunarst" type="text" class="form-control" id="Notkunarst" placeholder="Notkunarst."> </div> <div class="form-group col-md-4"> <label for="simi">Sími:</label> <input ng-model="simi" type="tel" class="form-control" id="simi" placeholder="Sími"> </div> </div> <div class="form-row"> <div class="form-group col-md-8"> <label for="taekisnumer">Tækisnúmer:</label> <input ng-model="taekisnumer" type="text" class="form-control" id="taekisnumer" placeholder="Tækisnúmer"> </div> <div class="form-group col-md-4"> <label for="tengil">Tengil.:</label> <input ng-model="tengil" type="text" class="form-control" id="tengil" placeholder="Tengil.:"> </div> </div> <div class="form-row"> <div class="form-group col-md-4"> <label for="verknumer">Verknúmer:</label> <input ng-model="verknumer" type="text" class="form-control" id="verknumer" placeholder="Verknúmer"> </div> <div class="form-group col-md-4"> <label for="bnumer">Beiðnaúmer:</label> <input ng-model="bnumer" type="text" class="form-control" id="bnumer" placeholder="Beiðnaúmer:"> </div> <div class="form-group col-md-4"> <label for="simi2">Sími 2:</label> <input ng-model="simi2" type="text" class="form-control" id="simi2" placeholder="Sími 2:"> </div> </div> <div class="form-row"> <div class="form-group col-md-8"> <label for="taekislysing">Tækislýsing:</label> <select id="taekislysing" class="form-control" ng-model="chosenMachine" ng-options="machine.name for machine in machines"> </select> </div> <div class="form-group col-md-4"> <label for="netf">Netf.:</label> <input ng-model="netf" type="email" class="form-control" id="netf" placeholder="Netf.:"> </div> </div> <div class="form-row"> <div class="form-group col-md-12"> <label for="ath">ATH.:</label> <input ng-model="ath" type="text" class="form-control" id="ath" placeholder="ATH."> </div> </div> <div class="form-row"> <div class="form-group col-md-6"> <label for="einverd">Ein. verð:</label> <input ng-model="einverd" type="number" class="form-control" id="einverd" placeholder="Ein. verð."> </div> <div class="form-group col-md-6"> <label for="magn">Magn:</label> <input ng-model="magn" type="number" class="form-control" id="magn" placeholder="Magn.:"> </div> </div> <div class="form-row"> <div class="form-group col-md-6"> <label for="filgihlutir">Fylgihlutir:</label> <input ng-model="filgihlutir" type="text" class="form-control" id="filgihlutir" placeholder="Fylgihlutir"> </div> <div class="form-group col-md-6"> <label for="triv">Þrif á tæki:</label> <input ng-model="triv" type="text" class="form-control" id="triv" placeholder="Þrif"> </div> </div> <div class="form-row"> <div class="form-group col-md-4"> <label for="olia">Olía:</label> <input ng-model="olia" type="text" class="form-control" id="olia" placeholder="Olía"> </div> <div class="form-group col-md-4"> <label for="bensin">Beisín:</label> <input ng-model="bensin" type="text" class="form-control" id="bensin" placeholder="Bensín:"> </div> <div class="form-group col-md-4"> <label for="gas">Gas:</label> <input ng-model="gas" type="text" class="form-control" id="gas" placeholder="Gas"> </div> </div> <div class="form-row"> <div class="form-group col-md-6"> <label for="flutningur">Flutningur:</label> <input ng-model="flutningur" type="text" class="form-control" id="flutningur" placeholder="Flutningur"> </div> <div class="form-group col-md-3"> <label>&nbsp;</label> <div> <label> <input ng-model="stor" class="form-check-input" type="checkbox"> Stór </label> </div> </div> <div class="form-group col-md-3"> <label>&nbsp;</label> <div> <label> <input ng-model="litill" class="form-check-input" type="checkbox"> Lítill </label> </div> </div> </div> <div> <h3>&nbsp;</h3> </div> <div class="form-row"> <div class="form-group col-md-6"> <label for="leigutimin">Leigutímin hefst:<span style="font-size: x-small">*reqired</span></label> <input ng-model="leigutimin" type="datetime-local" class="form-control" id="leigutimin" required> </div> <div class="form-group col-md-6"> <label for="leigutiminLykur">Leigutíma lýkur:<span style="font-size: x-small"></span></label> <input ng-model="leigutiminLykur" type="datetime-local" class="form-control" id="leigutiminLykur"> </div> </div> <!--TODO add form validation on card creation--> <button ng-disabled="newCardForm.$invalid" ng-click="createCard()" type="submit" class="btn btn-primary btn-lg btn-block">Create card </button> </form> </div>')}]);